{% extends 'base.html' %}
{% block content %}
<h3>Edit User</h3>
<form method="post">
  <div class="mb-3">
    <label class="form-label">Nama Lengkap</label>
    <input type="text" name="fullname" class="form-control"
           value="{{ user.fullname }}" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Email</label>
    <input type="email" name="email" class="form-control"
           value="{{ user.email }}" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Role</label>
    <select name="role" class="form-select">
      <option value="user"  {{ 'user'  == user.role and 'selected' }}>User</option>
      <option value="admin" {{ 'admin' == user.role and 'selected' }}>Admin</option>
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">Ganti Password (opsional)</label>
    <div class="input-group">
      <input type="password" name="password" id="edit-user-password" class="form-control">
      <button class="btn btn-outline-secondary" type="button" id="toggle-edit-user-password" aria-label="Tampilkan password">
        <i class="fa fa-eye"></i>
      </button>
    </div>
  </div>

  <button class="btn btn-success"><i class="fa fa-save"></i> Simpan</button>
  <a href="{{ url_for('loans') }}" class="btn btn-secondary">Batal</a>
</form>
<script>
  (function() {
    const toggle = document.getElementById('toggle-edit-user-password');
    const input = document.getElementById('edit-user-password');
    if (!toggle || !input) return;
    toggle.addEventListener('click', () => {
      const isHidden = input.type === 'password';
      input.type = isHidden ? 'text' : 'password';
      toggle.setAttribute('aria-label', isHidden ? 'Sembunyikan password' : 'Tampilkan password');
      const icon = toggle.querySelector('i');
      if (icon) {
        icon.classList.toggle('fa-eye', !isHidden);
        icon.classList.toggle('fa-eye-slash', isHidden);
      }
    });
  })();
</script>
{% endblock %}
